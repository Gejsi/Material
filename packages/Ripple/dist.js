(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?b(exports,require('inferno'),require('inferno-component'),require('@slup/theming')):'function'==typeof define&&define.amd?define(['exports','inferno','inferno-component','@slup/theming'],b):b((a.Slup=a.Slup||{},a.Slup.Ripple={}),a.Inferno,a.Inferno.Component,a.Slup.Theming)})(this,function(a,b,c,d){'use strict';function e(a,c){function b(){this.constructor=a}j(a,c),a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)}function f(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&'function'==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&(c[d[e]]=a[d[e]]);return c}c=c&&c.hasOwnProperty('default')?c['default']:c;var g,h,i='default'in d?d['default']:d,j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])},k=(g=['\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  overflow: hidden;\n  border-radius: inherit;\n'],g.raw=['\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  overflow: hidden;\n  border-radius: inherit;\n'],i.div(g)),l=(h=['\n  position: absolute;\n  top: ',';\n  left: ',';\n  pointer-events: none;\n  height: 10px;\n  width: 10px;\n  background: ',';\n  opacity: ',';\n  transition:\n    transform 900ms cubic-bezier(0.4, 0.0, 0.2, 1),\n    opacity   250ms cubic-bezier(0.4, 0.0, 0.2, 1);\n  transform: scale(',');\n  border-radius: 50%;\n'],h.raw=['\n  position: absolute;\n  top: ',';\n  left: ',';\n  pointer-events: none;\n  height: 10px;\n  width: 10px;\n  background: ',';\n  opacity: ',';\n  transition:\n    transform 900ms cubic-bezier(0.4, 0.0, 0.2, 1),\n    opacity   250ms cubic-bezier(0.4, 0.0, 0.2, 1);\n  transform: scale(',');\n  border-radius: 50%;\n'],i.div(h,function(a){return isNaN(a.y)?'calc('+a.y+' - 5px)':a.y-5+'px'},function(a){return isNaN(a.x)?'calc('+a.x+' - 5px)':a.x-5+'px'},function(a){return a.primary?d.rgba(a.theme.primary||d.lightTheme.primary,.3):a.secondary?d.rgba(a.theme.secondary||d.lightTheme.secondary,.3):d.rgba(a.theme.text||d.lightTheme.text,.15)},function(a){return a.ended&&a.isRemovable?0:1},function(a){return a.scale})),m=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},n=function(a){function c(){var b=a.call(this)||this;return b.state={ripples:[]},b.addHandler=b.addHandler.bind(b),b.handleMouseDown=b.handleMouseDown.bind(b),b.onEnded=b.onEnded.bind(b),b.onFaded=b.onFaded.bind(b),b.fire=b.fire.bind(b),b}return e(c,a),c.prototype.handleMouseDown=function(a,b){var c=b.offsetX,d=b.offsetY,e=a.state.ripples,f=e.length;e.push({id:f,isRemovable:!1,x:c,y:d}),a.addHandler(f),a.setState({ripples:e}),a.fire(f)},c.prototype.onEnded=function(a){var b=this,c=this.state.ripples;c[a].ended=!0,this.setState({ripples:c}),setTimeout(function(){return b.onFaded(a)},250)},c.prototype.onFaded=function(a){var b=this.state.ripples;b[a].faded=!0,this.setState({ripples:b})},c.prototype.fire=function(a){var b=this,c=this.state.ripples,d=this.ripple.getBoundingClientRect(),e=d.width,f=d.height,g=e>f?e:f;c[a].scale=g/4.5,this.setState({ripples:c}),setTimeout(function(){return b.onEnded(a)},600)},c.prototype.addHandler=function(a){var b=this,c=this.state.ripples,d=function(){c[a].isRemovable=!0,b.setState({ripples:c}),window.removeEventListener('mouseup',d)};window.addEventListener('mouseup',d)},c.prototype.render=function(a){var c=this,d=a.startX,e=a.startY,g=f(a,['startX','startY']);return b.createVNode(16,k,null,null,{innerRef:function(a){return c.ripple=a},onMouseDown:b.linkEvent(this,this.handleMouseDown),children:this.state.ripples.map(function(a,c){return a.isRemovable&&a.ended&&a.faded?null:b.createVNode(16,l,null,null,m({},g,a,{x:d||a.x,y:e||a.y}),c)})})},c}(c);a.Ripple=n,Object.defineProperty(a,'__esModule',{value:!0})});
